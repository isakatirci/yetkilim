@using Yetkilim.Domain.DTO
@model Yetkilim.Web.Areas.Admin.Models.DashboardViewModel
<div id="project-dashboard" class="page-layout simple right-sidebar">
    <div class="page-content-wrapper custom-scrollbar">
        <!-- HEADER -->
        <div class="page-header bg-primary text-auto d-flex flex-column justify-content-between px-6 pt-4 pb-0">
            <div class="row no-gutters align-items-start justify-content-between flex-nowrap">
                <div>
                    <span class="h2">Welcome back, John!</span>
                </div>
                @*<button type="button" class="sidebar-toggle-button btn btn-icon d-block d-xl-none" data-fuse-bar-toggle="aside" aria-label="Toggle sidebar">
                    <i class="icon icon-menu"></i>
                </button>*@
            </div>
            <div class="row no-gutters align-items-center project-selection">
                <div class="selected-project h6 px-4 py-2">ACME Corp. Backend App</div>
                @*<div class="project-selector">
                        <button type="button" class="btn btn-icon">
                            <i class="icon icon-dots-horizontal"></i>
                        </button>
                    </div>*@
            </div>
        </div>
        <!-- / HEADER -->
        <!-- CONTENT -->
        <div class="page-content">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link btn active" id="home-tab" data-toggle="tab" href="#home-tab-pane" role="tab" aria-controls="home-tab-pane" aria-expanded="true">Home</a>
                </li>
                @*<li class="nav-item">
                        <a class="nav-link btn" id="budget-summary-tab" data-toggle="tab" href="#budget-summary-tab-pane" role="tab" aria-controls="budget-summary-tab-pane">Budget Summary</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn" id="team-members-tab" data-toggle="tab" href="#team-members-tab-pane" role="tab" aria-controls="team-members-tab-pane">Team Members</a>
                    </li>*@
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade show active p-3" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab">
                    <!-- WIDGET GROUP -->
                    <div class="widget-group row no-gutters">
                        <div class="col-12 col-sm-6 col-xl-3 p-3">
                            <div class="widget widget2 card">
                                <div class="widget-header pl-4 pr-2 row no-gutters align-items-center justify-content-between">
                                    <div class="col">
                                        <span class="h6">Değerlendirmeler</span>
                                    </div>
                                </div>
                                <div class="widget-content pt-2 pb-8 d-flex flex-column align-items-center justify-content-center">
                                    <div class="title text-danger">@Model.FeedbackCount</div>
                                    <div class="sub-title h6 text-muted">DEĞERLENDİRME</div>
                                </div>
                            </div>
                        </div>
                        @*<div class="col-12 col-sm-6 col-xl-3 p-3">
                                <div class="widget widget2 card">
                                    <div class="widget-header pl-4 pr-2 row no-gutters align-items-center justify-content-between">
                                        <div class="col">
                                            <span class="h6">Kullanıcılar</span>
                                        </div>
                                    </div>
                                    <div class="widget-content pt-2 pb-8 d-flex flex-column align-items-center justify-content-center">
                                        <div class="title text-secondary">2</div>
                                        <div class="sub-title h6 text-muted">KULLANICI</div>
                                    </div>
                                </div>
                            </div>*@
                        @*<div class="col-12 col-sm-6 col-xl-3 p-3">
                                <div class="widget widget2 card">
                                    <div class="widget-header pl-4 pr-2 row no-gutters align-items-center justify-content-between">
                                        <div class="col">
                                            <span class="h6">Promosyonlar</span>
                                        </div>
                                    </div>
                                    <div class="widget-content pt-2 pb-8 d-flex flex-column align-items-center justify-content-center">
                                        <div class="title text-info">4</div>
                                        <div class="sub-title h6 text-muted">PROMOSYON</div>
                                    </div>
                                </div>
                            </div>*@
                        <div class="col-12 col-sm-6 col-xl-3 p-3">
                            <div class="widget widget2 card">
                                <div class="widget-header pl-4 pr-2 row no-gutters align-items-center justify-content-between">
                                    <div class="col">
                                        <span class="h6">Şubeler</span>
                                    </div>
                                </div>
                                <div class="widget-content pt-2 pb-8 d-flex flex-column align-items-center justify-content-center">
                                    <div class="title text-warning">@Model.PlaceCount</div>
                                    <div class="sub-title h6 text-muted">ŞUBE</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 p-3">

                            <div class="widget widget5 card">

                                <div class="widget-header px-4 row no-gutters align-items-center justify-content-between">

                                    <div class="col">
                                        <span class="h6">Son 10 Geri Bildirim</span>
                                    </div>
                                </div>

                                <div class="widget-content p-4">

                                    <table id="last-feedback-table" class="table dataTable">
                                        <thead>
                                            <tr>
                                                @*<th>
                                                    <div class="table-header">
                                                        <span class="column-title">ID</span>
                                                    </div>
                                                </th>*@
                                                <th>
                                                    <div class="table-header">
                                                        <span class="column-title">Mekan</span>
                                                    </div>
                                                </th>
                                                <th>
                                                    <div class="table-header">
                                                        <span class="column-title">Açıklama</span>
                                                    </div>
                                                </th>
                                                <th>
                                                    <div class="table-header">
                                                        <span class="column-title">Değerlendiren</span>
                                                    </div>
                                                </th>
                                                <th>
                                                    <div class="table-header">
                                                        <span class="column-title">Eklenme Tarihi</span>
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var feedback in Model.Feedbacks ?? Enumerable.Empty<FeedbackDTO>())
                                            {
                                            <tr>
                                                @*<td>@feedback.Id</td>*@
                                                <td>@feedback.Place?.Name</td>
                                                <td>@feedback.Description</td>
                                                @if (feedback.User != null)
                                                {
                                                    <td>@feedback.User.Name @feedback.User.Surname</td>
                                                }
                                                else
                                                {
                                                    <td>Anonim</td>
                                                }
                                                <td>@feedback.CreatedDate.ToShortDateString()</td>
                                            </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- / WIDGET GROUP -->


                </div>
            </div>
        </div>
        <!-- / CONTENT -->
    </div>
</div>

@section Styles{
    @*<style>
        .widget-content {
            cursor: pointer;
        }
    </style>*@
}
@section Scripts{
    <script>
        $('#last-feedback-table').DataTable( {
            responsive: true,
            dom: 'rt<"dataTables_footer"ip>'
        } );
    </script>
}
